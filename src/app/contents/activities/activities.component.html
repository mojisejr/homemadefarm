<div fxLayout="column" fxLayoutGap="1rem" class="container">
    <div class="menu-warpper" *ngIf="_crop.status != 'Closed'">
        <mat-card>
            <mat-card-header>
                <mat-card-title>Add new activity</mat-card-title>
            </mat-card-header>
            <mat-card-content>
                <form fxLayout.xs="column" [formGroup]="activityForm" (ngSubmit)="onSubmit()">
                    <mat-form-field>
                        <mat-label>Category</mat-label>
                        <mat-select 
                        formControlName="category"
                        required>
                            <mat-option value="fertilizer">Fertilizer</mat-option>
                            <mat-option value="embeded">Embeded</mat-option>
                            <mat-option value="spray">Spray</mat-option>
                        </mat-select>
                    </mat-form-field>
                    <div class="fertilizer-wrapper">
                        <button type="button" mat-flat-button color="warn" (click)="addFertilizerClick()">add fertilizer/insecticide</button>
                        <div formArrayName="fertilizer" *ngFor="let fert of activityForm.get('fertilizer').controls; let i = index">
                            <div fxLayoutGap="10px" [formGroupName]="i" fxLayout.xs="column">
                                <mat-form-field>
                                    <input matInput type="text" formControlName="formula" placeholder="formula" required>
                                </mat-form-field>
                                <mat-form-field>
                                    <input matInput type="number" formControlName="amount" placeholder="amount" required>
                                </mat-form-field>
                                <mat-form-field>
                                    <mat-label>unit</mat-label>
                                    <mat-select 
                                    formControlName="unit"
                                    required>
                                        <mat-option value="ml">ml(cc)</mat-option>
                                        <mat-option value="g">g</mat-option>
                                    </mat-select>
                                </mat-form-field>
                            </div>
                        </div>
                    </div>
                    <mat-form-field appearance="fill">
                        <mat-label>description</mat-label>
                        <textarea matInput formControlName="description"></textarea>
                      </mat-form-field>
                      <div>
                        <button type="submit" mat-raised-button color="warn">Add Activity</button>
                      </div>
                </form>
            </mat-card-content>
        </mat-card>
    </div>
    <div class="table-wrapper">
        <app-activities-table [docId]="_docId"></app-activities-table>
    </div>
</div>